# from scrappppp import scrap
from crawling import scrap
from pre import preprocessing
from tfidf_algo import tfidf_knn

def gabung(linkk):
    # a = input("Masukkan link berita : ")
    teks = scrap(linkk)
    print(teks)
    # teks = 'KONTAN.CO.ID - NEW YORK. Harga bitcoin dan aset kripto yang lain anjlok. Harga bitcoin per 13 Mei 2021 hingga pukul 20.30 WIB misalnya turun 10,97% di US$ 49.788 per BTC. Akibatnya kapitalisasi pasar bitcoin runtuh di bawah US$ 1 triliun menjadi US$ 929 miliar.  Kondisi ethereum, aset kripto dengan kapitalisasi pasar terbesar kedua juga anjlok 10,95% menjadi US$ 3.784 per ETH. Akibatnya market cap Ethereum tersisa US$ 435 miliar.  Harga Dogecoin pun sama saja. Harga DOGE turun 14,72% menjadi U$ 0,4151 per DOGE. Dus, kapitalisasi pasar dogecoin tersisa US$ 53,21 miliar.  Pasar cryptocurrency anjlok setelah miliarder Elon Musk dan salah satu pendiri ethereum Vitalik Buterin membuat kejutan. Penurunan tajam dipicu oleh Buterin, miliarder crypto termuda di dunia, tiba-tiba memindahkan cryptocurrency senilai lebih dari US$ 2 miliar.  Buterin menyumbangkan US$ 1 miliar dalam bentuk token meme, dogecoin ke India Covid Relief Fund dan berbagai badan amal lainnya serta memindahkan token eter etherum senilai US$ 1,3 miliar dari alamat publik utamanya ke dompet terpisah Sementara itu, miliarder Tesla Elon Musk menghentikan penggunaan bitcoin pembelian mobil Tesla. Pergerakan tersebut menyebabkan kekhawatiran karena pendiri ethereum mencairkan kepemilikan cryptocurrency dan menjatuhkan harga ethereum dari level tertinggi baru-baru ini lebih dari US$ 4.000 per token eter.  Pasar mata uang kripto telah buble hingga lebih dari US$ 2 triliun tahun ini, dengan bitcoin sebagai mata uang kripto terbesar di dunia dengan kapitalisasi pasar sekitar US$ 1 triliun. Pertumbuhan pasar crypto juga telah didukung oleh harga ethereum yang melonjak dan kegilaan spekulatif juga diikuti oleh dogecoin. Di tempat lain, Elon Musk, kepala eksekutif Tesla dan pendukung lama Bitcoin, mengumumkan perusahaannya akan menangguhkan penggunaan bitcoin pelanggan untuk membeli kendaraannya. "Cryptocurrency adalah ide yang bagus di banyak tingkatan dan kami percaya ini memiliki masa depan yang menjanjikan, tetapi ini tidak bagus untuk lingkungan biaya," kata Musk melalui Twitter. Musk, yang membantu harga bitcoin naik menjadi lebih dari US$ 60.000 awal tahun ini mengutip kekhawatiran lingkungan seputar bagaimana mereka yang mengamankan jaringan bitcoin, yang dikenal sebagai penambang dan memberi daya pada mesin mereka. Pada Februari 2021, Tesla mengungkapkan telah membeli US$ 1,5 miliar bitcoin dan mulai menerima bitcoin sebagai pembayaran untuk pembelian mobil pada bulan Maret. Dus, harga bitcoin melonjak lebih dari 20%. "Elon Musk memiliki kemampuan untuk memompa atau menjatuhkan harga bitcoin dengan sendirinya saat itu sesuai dengan kepentingannya," ujar Alex Kuptsikevich, analis keuangan senior di FxPro dalam komentar melalui email seperti dikutip Forbes. Ia juga bilang tidak mengherankan jika Telsa selanjutnya mengumumkannya menjual beberapa bitcoin dan menyebabkan aksi jual menjadi lebih sengit.  "Ketergantungan yang besar pada pandangan pasar pada pernyataan dari satu investor besar menjadi celah besar untuk pasar crypto dan ini berarti risiko yang perlu dicatat. Kejatuhan bitcoin juga bertepatan dengan koreksi di S&P 500 dan ini sekali lagi membuktikan bahwa komposisi investor kedua pasar berkorelasi baik," papar Kuptsikevich seperti dikutip Forbes.  Meski begitu, Musk mengatakan, Telsa akan terus memegang bitcoin di neracanya dan akan memulai kembali transaksi bitcoin di masa depan. Dia menambahkan, perusahaan yang dilaporkan berharap untuk memasuki pasar kredit multi-miliar dolar AS yang dapat diperbarui, sedang mencari cryptocurrency lain yang memiliki dampak lingkungan yang lebih kecil. "Kami juga melihat cryptocurrency lain yang menggunakan <1% dari energi / transaksi bitcoin," kata Musk. Harga saham Tesla juga turun selama perdagangan setelah jam kerja. "Tesla dan bitcoin selalu menjadi korelasi yang aneh, mengingat kredensial bisnis dari pembuat mobil listrik, dan jumlah energi yang sangat besar yang dikonsumsi oleh cryptocurrency," jelas Laith Khalaf, analis keuangan pialang AJ Bell seperti dikutip Forbes.  "Masalah lingkungan adalah subjek yang sangat sensitif saat ini, dan langkah Tesla mungkin berfungsi sebagai peringatan bagi bisnis dan konsumen yang menggunakan bitcoin," kata Khalaf seperti dikutip Forbes. Dia menambahkan, hingga saat ini belum ada yang mempertimbangkan jejak karbonnya. Tesla mungkin telah menghasilkan US$ 101 juta dari penjualan bitcoin di tiga bulan pertama tahun ini, tetapi sekarang investor akan secara sah bertanya apakah uang itu bisa dibelanjakan dengan lebih baik di tempat lain.'
    prepro = preprocessing(teks[1])


    hasil = tfidf_knn(prepro)
    print(hasil)
    item = {
        'berita' : teks[1],
        'hasil' : hasil[0],
        'judul' : teks[0]
    }
    return(item)